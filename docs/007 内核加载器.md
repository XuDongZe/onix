# 内核加载器

- 写内核加载器 loader
- 将 loader 写入硬盘
- 在主引导扇区读入
- 检测正确性
- 跳转到loader执行

## 实模式的内存布局
| 起始地址 | 结束地址 | 大小 | 用途 |
| -- | -- | -- | -- |
| `0x000` | `0x3FF` | 1KB | 中断向量表 |
| `0x400` | `0x4FF` | 256B | BIOS数据区 |
| `0x500` | `0x7BFF` | 29.75KB | 可用区域 |
| `0x7C00` | `0x7DFF`| 512B | MBR加载区域 |
| `0x7E00` | `0x9FBFF` | 607.6KB | 可用区域 |
| `0x9FC00` | `0x9FFFF` | 1KB | 扩展BIOS数据区 |
| `0xA0000` | `0xAFFFF` | 64KB | 用于彩色显示适配器 |
| `0xB0000` | `0xB7FFF` | 32KB | 用于黑白显示适配器 |
| `0xB8000` | `0xBFFFF` | 32KB | 用于文本显示适配器 |
| `0xC000` | `0xC7FFF` | 32KB | 显示适配器BIOS |
| `0xC8000` | | `0xEFFFF` | 160KB | 映射内存 |
| `0xF0000` | | `0xFFFEF` | 64KB - 16B | 系统BIOS
| `0xFFFF0` | | `0xFFFFF` | 16B | 系统BIOS入口地址 |

## 内核加载流程

1. 厂商硬件在`0xFFFF0`处（ROM）写入 系统BIOS入口地址。
2. 系统加电后，跳转到BIOS入口地址
3. BIOS将 主引导扇区 加载到 `0x7C00`(MBR)，并跳转到 `0x7C00`执行，这个地方就是boot.asm的第一条指令